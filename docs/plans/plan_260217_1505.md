# Plan: Fix model downloads + HF token visibility

## Goals

- Fix misleading “downloaded” state when required additional files fail.
- Show HuggingFace token configuration status in the models panel.
- Prevent gated-model downloads when no token is configured.

## Context

- Downloads are managed in `NvidiaVoiceAgent.ModelHub/ModelDownloadService.cs`.
- UI model cards are rendered in `NvidiaVoiceAgent/wwwroot/index.html` from `/api/models`.
- HF token is configured via `ModelHubOptions.HuggingFaceToken`.

## Steps

1. **Tighten download success criteria**
   - Track additional file download failures.
   - Mark the entire download as failed if any required additional file fails.

2. **Expose token configuration status**
   - Add `HuggingFaceTokenConfigured` to `ModelStatusResponse`.
   - Populate the field in `ModelsController` from `ModelHubOptions`.

3. **Guard gated model downloads**
   - Block downloads of gated models when no token is configured.
   - Return a friendly 400 response with setup guidance.

4. **Update the models panel UI**
   - Show a ✅ “HF Token configured” indicator when set.
   - Show the existing warning only when token is missing.
   - Disable download button for gated models without a token.

5. **Verify end-to-end**
   - Run the app, open the models panel, and validate download and token UI states.
   - Confirm logs and status updates for success/failure paths.

## Tests / Validation

- Manual: start the app, trigger PersonaPlex download with/without token, and verify UI states + logs.
